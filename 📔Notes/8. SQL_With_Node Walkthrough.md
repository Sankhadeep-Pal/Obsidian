# [MySQL with Node Tutorial](https://www.apnacollege.in/path-player?courseid=sigma-8&unit=68a48c17c68931e41305b424Unit)

## Requirements
This is a extended note to marge two technologies, I is recommended to see the Basics first.

- [[5. Node.js Notes| Node.js]] 
- [[7. MySQL Notes|MySQL]]

---

## Faker Package

### ğŸ”¹ Introduction

- **Faker.js** is an **npm package** for generating **fake data** in JavaScript/Node.js.

- Used for **testing, seeding databases, mocking APIs, prototyping UI, and generating demo data**.

- Originally created by **Marak Squires** (but later removed); the **community fork `@faker-js/faker`** is now the standard.

### ğŸ”¹ Installation

```bash
# Install the official maintained fork
npm install @faker-js/faker
```

### ğŸ”¹ Basic Usage

```javascript
// Import faker
import { faker } from '@faker-js/faker';

// Generate some fake data
console.log(faker.person.fullName());  
console.log(faker.internet.email());  
console.log(faker.location.city());  
```

### ğŸ”¹ Commonly Used APIs

#### ğŸ‘¤ People & Identity

```javascript
faker.person.firstName();     // "John"
faker.person.lastName();      // "Doe"
faker.person.fullName();      // "John Doe"
faker.person.jobTitle();      // "Software Engineer"
faker.person.sex();           // "male" / "female"
```

#### ğŸ“ Location & Address

```javascript
faker.location.city();        // "New York"
faker.location.country();     // "Canada"
faker.location.zipCode();     // "90210"
faker.location.streetAddress(); // "123 Main St"
```

#### ğŸŒ Internet & Web

```javascript
faker.internet.email();       // "jane.doe@example.com"
faker.internet.userName();    // "coolguy123"
faker.internet.url();         // "https://example.com"
faker.internet.ip();          // "192.168.0.1"
faker.internet.password();    // "Xyz@123!"
```

#### ğŸ¢ Business & Commerce

```javascript
faker.company.name();         // "Tech Solutions Inc."
faker.commerce.productName(); // "Wireless Keyboard"
faker.commerce.price();       // "$49.99"
```

#### ğŸ“… Dates & Time

```javascript
faker.date.past();            // Random past date
faker.date.future();          // Random future date
faker.date.birthdate();       // Random DOB
```

#### ğŸ’³ Finance

```javascript
faker.finance.accountNumber();  // "1234567890"
faker.finance.creditCardNumber(); // "4111111111111111"
faker.finance.amount();          // "250.75"
```

#### ğŸ² Random & Helpers

```javascript
faker.helpers.arrayElement(["Python", "Java", "C++"]); 
// "Java"

faker.helpers.multiple(faker.animal.dog, { count: 3 }); 
// ["Beagle", "Labrador", "Husky"]
```

### ğŸ”¹ Locales (Multi-language Support)

- Faker supports **locales** for country-specific data.
    
```javascript
import { Faker } from '@faker-js/faker';

// US English
const fakerUS = new Faker({ locale: "en_US" });
console.log(fakerUS.person.fullName()); // "Michael Johnson"

// Hindi (India)
const fakerIN = new Faker({ locale: "hi_IN" });
console.log(fakerIN.person.fullName()); // "à¤…à¤œà¤¯ à¤¶à¤°à¥à¤®à¤¾"
```

### ğŸ”¹ Seeding (Reproducible Data)

- For debugging & consistency:
    
```javascript
faker.seed(123);

console.log(faker.person.fullName()); // Always same output for this seed
```

### ğŸ”¹ Generating Multiple Fake Records

```javascript
const users = Array.from({ length: 5 }, () => ({
  name: faker.person.fullName(),
  email: faker.internet.email(),
  city: faker.location.city()
}));

console.log(users);
```

ğŸ‘‰ Creates an array of 5 fake users.

### ğŸ”¹ Advanced Usage

#### ğŸ“‹ Profiles

```javascript
const userProfile = {
  id: faker.string.uuid(),
  name: faker.person.fullName(),
  email: faker.internet.email(),
  job: faker.person.jobTitle(),
  address: faker.location.streetAddress()
};

console.log(userProfile);
```

#### ğŸ”Œ Custom Data with Helpers

```javascript
faker.helpers.fake('{{person.firstName}} is a {{person.jobTitle}} from {{location.city}}.');
// "Alice is a Software Engineer from Berlin."
```

### ğŸ”¹ Real-World Use Cases

1. **Frontend Dev** â€“ Populate UI with dummy users/products.

2. **API Mocking** â€“ Return fake JSON responses in development.

3. **Database Seeding** â€“ Insert test data in DBs.

4. **Testing & QA** â€“ Run automated tests with fake inputs.

5. **Machine Learning** â€“ Generate synthetic datasets.

### âœ… **Summary:**

- **Faker.js (`@faker-js/faker`)** = Fake data generator for **Node.js & JS**.

- Provides realistic names, addresses, emails, finance, and commerce data.

- Supports **locales, reproducibility with seeding, and bulk generation**.

- Essential tool for **mocking, seeding, and testing** in development.

---

Alright Sankho, letâ€™s build **detailed notes** on the **MySQL2 package (npm)**. This will be useful for your database + Node.js work.

---

## MySQL2 Package

### ğŸ”¹ Introduction

- **MySQL2** is a **Node.js package** for interacting with **MySQL and MariaDB** databases.

- It is a **modern, faster, and improved** version of the older `mysql` package.

- Fully compatible with `mysql` but with **extra features**:
    
    - **Promises & async/await** support
    
    - **Prepared statements** (to prevent SQL injection)
    
    - **Connection pooling**
    
    - **Better performance** (built on C++ bindings)

### ğŸ”¹ Installation

```bash
npm install mysql2
```

---

### ğŸ”¹ Basic Usage (Callback API)

```javascript
import mysql from 'mysql2';

// Create connection
const connection = mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: 'password123',
  database: 'test_db'
});

// Connect & query
connection.query('SELECT * FROM users', (err, results) => {
  if (err) throw err;
  console.log(results);
});

connection.end();
```

---

### ğŸ”¹ Using Promises (Recommended)

```javascript
import mysql from 'mysql2/promise';

async function main() {
  const connection = await mysql.createConnection({
    host: 'localhost',
    user: 'root',
    password: 'password123',
    database: 'test_db'
  });

  const [rows, fields] = await connection.execute('SELECT * FROM users');
  console.log(rows);

  await connection.end();
}

main();
```

âœ… **Note:** The `[rows, fields]` destructuring is standard â€” rows = data, fields = metadata.

---

### ğŸ”¹ Query with Parameters (Prepared Statements)

- Prevents **SQL Injection** by using placeholders `?`.
    
```javascript
const [rows] = await connection.execute(
  'SELECT * FROM users WHERE email = ? AND password = ?',
  ['john@example.com', 'secret123']
);
```

ğŸ‘‰ Values are automatically escaped safely.

---

### ğŸ”¹ Connection Pooling

- Instead of creating a new connection each time, use a **pool** for efficiency.
    
```javascript
import mysql from 'mysql2/promise';

const pool = mysql.createPool({
  host: 'localhost',
  user: 'root',
  password: 'password123',
  database: 'test_db',
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0
});

async function main() {
  const [rows] = await pool.query('SELECT * FROM users');
  console.log(rows);
}

main();
```

---

### ğŸ”¹ Insert, Update, Delete Queries

#### Insert

```javascript
const [result] = await connection.execute(
  'INSERT INTO users (name, email) VALUES (?, ?)',
  ['Alice', 'alice@example.com']
);
console.log('Inserted ID:', result.insertId);
```

#### Update

```javascript
await connection.execute(
  'UPDATE users SET email = ? WHERE id = ?',
  ['newalice@example.com', 1]
);
```

#### Delete

```javascript
await connection.execute(
  'DELETE FROM users WHERE id = ?',
  [1]
);
```

### ğŸ”¹ Transactions

- Ensures multiple queries run as a **single unit** (commit or rollback).
    
```javascript
const conn = await pool.getConnection();

try {
  await conn.beginTransaction();

  await conn.execute('INSERT INTO accounts (name, balance) VALUES (?, ?)', ['User1', 1000]);
  await conn.execute('INSERT INTO accounts (name, balance) VALUES (?, ?)', ['User2', 2000]);

  await conn.commit();  // âœ… Save changes
} catch (err) {
  await conn.rollback(); // âŒ Undo if error
  console.error(err);
} finally {
  conn.release(); // Release connection back to pool
}
```

---

### ğŸ”¹ Streaming Results

- Useful for **large datasets** (avoids loading everything in memory).
    
```javascript
connection.query('SELECT * FROM big_table')
  .stream()
  .on('data', row => console.log(row))
  .on('end', () => console.log('Done!'));
```

---

### ğŸ”¹ Real-World Use Cases

1. **Web Apps** â€“ Connect Node.js backend with MySQL/MariaDB.

2. **APIs** â€“ Use MySQL2 in Express.js apps for CRUD operations.

3. **ETL Pipelines** â€“ Stream large database results efficiently.

4. **Authentication Systems** â€“ Secure queries with prepared statements.

5. **High-concurrency Apps** â€“ Use connection pooling for performance.

### ğŸ”¹ Key Differences `mysql2` vs `mysql` Package

|Feature|`mysql` (old)|`mysql2` (modern)|
|---|---|---|
|Performance|Slower|Faster (native bindings)|
|Promise support|âŒ No|âœ… Yes (built-in)|
|Prepared Statements|Limited|Strong support|
|Pooling|Yes|Yes|
|Maintained?|âŒ Deprecated|âœ… Active|

### âœ… **Summary**

- **MySQL2** is the recommended Node.js package for working with MySQL/MariaDB.

- Supports **callbacks, promises, async/await**, connection pools, prepared statements, and transactions.

- Use it with frameworks like **Express.js** to build scalable backends.

---

